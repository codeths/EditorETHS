// Emoji autocomplete map
export const emojiMap = {
  // Smileys & Emotion
  'smile': 'ğŸ˜Š', 'grin': 'ğŸ˜', 'joy': 'ğŸ˜‚', 'rofl': 'ğŸ¤£', 'sob': 'ğŸ˜­',
  'heart_eyes': 'ğŸ˜', 'kiss': 'ğŸ˜˜', 'wink': 'ğŸ˜‰', 'thinking': 'ğŸ¤”',
  'neutral': 'ğŸ˜', 'smirk': 'ğŸ˜', 'unamused': 'ğŸ˜’', 'roll_eyes': 'ğŸ™„',
  'grimacing': 'ğŸ˜¬', 'lying': 'ğŸ¤¥', 'relieved': 'ğŸ˜Œ', 'pensive': 'ğŸ˜”',
  'sleepy': 'ğŸ˜ª', 'sleeping': 'ğŸ˜´', 'mask': 'ğŸ˜·', 'sick': 'ğŸ¤’',
  'injured': 'ğŸ¤•', 'nauseated': 'ğŸ¤¢', 'vomit': 'ğŸ¤®', 'sneeze': 'ğŸ¤§',
  'hot': 'ğŸ¥µ', 'cold': 'ğŸ¥¶', 'dizzy': 'ğŸ˜µ', 'explode': 'ğŸ¤¯',
  'cowboy': 'ğŸ¤ ', 'party': 'ğŸ¥³', 'sunglasses': 'ğŸ˜', 'nerd': 'ğŸ¤“',
  'monocle': 'ğŸ§', 'confused': 'ğŸ˜•', 'worried': 'ğŸ˜Ÿ', 'frown': 'â˜¹ï¸',
  'open_mouth': 'ğŸ˜®', 'hushed': 'ğŸ˜¯', 'astonished': 'ğŸ˜²', 'flushed': 'ğŸ˜³',
  'pleading': 'ğŸ¥º', 'anguished': 'ğŸ˜§', 'fearful': 'ğŸ˜¨', 'cold_sweat': 'ğŸ˜°',
  'disappointed': 'ğŸ˜', 'sweat': 'ğŸ˜“', 'weary': 'ğŸ˜©', 'tired': 'ğŸ˜«',
  'yawn': 'ğŸ¥±', 'triumph': 'ğŸ˜¤', 'rage': 'ğŸ˜¡', 'angry': 'ğŸ˜ ',
  'cursing': 'ğŸ¤¬', 'smiling_imp': 'ğŸ˜ˆ', 'imp': 'ğŸ‘¿', 'skull': 'ğŸ’€',

  // Hand gestures
  'clap': 'ğŸ‘', 'pray': 'ğŸ™', 'thumbsup': 'ğŸ‘', 'thumbsdown': 'ğŸ‘',
  'ok_hand': 'ğŸ‘Œ', 'punch': 'ğŸ‘Š', 'fist': 'âœŠ', 'v': 'âœŒï¸',
  'wave': 'ğŸ‘‹', 'point_right': 'ğŸ‘‰', 'point_left': 'ğŸ‘ˆ', 'point_up': 'â˜ï¸',
  'point_down': 'ğŸ‘‡', 'raised_hand': 'âœ‹', 'muscle': 'ğŸ’ª',

  // Hearts
  'heart': 'â¤ï¸', 'orange_heart': 'ğŸ§¡', 'yellow_heart': 'ğŸ’›',
  'green_heart': 'ğŸ’š', 'blue_heart': 'ğŸ’™', 'purple_heart': 'ğŸ’œ',
  'black_heart': 'ğŸ–¤', 'white_heart': 'ğŸ¤', 'brown_heart': 'ğŸ¤',
  'broken_heart': 'ğŸ’”', 'two_hearts': 'ğŸ’•', 'sparkling_heart': 'ğŸ’–',
  'heartpulse': 'ğŸ’—', 'heartbeat': 'ğŸ’“', 'revolving_hearts': 'ğŸ’',

  // Symbols
  'star': 'â­', 'sparkles': 'âœ¨', 'boom': 'ğŸ’¥', 'fire': 'ğŸ”¥',
  'dizzy_symbol': 'ğŸ’«', 'sweat_drops': 'ğŸ’¦', 'dash': 'ğŸ’¨',
  'check': 'âœ…', 'x': 'âŒ', 'warning': 'âš ï¸', 'stop_sign': 'ğŸ›‘',
  'bell': 'ğŸ””', 'zzz': 'ğŸ’¤', 'speech_balloon': 'ğŸ’¬',
  'thought_balloon': 'ğŸ’­', 'eye': 'ğŸ‘ï¸', 'brain': 'ğŸ§ ',

  // Activities
  'soccer': 'âš½', 'basketball': 'ğŸ€', 'football': 'ğŸˆ', 'baseball': 'âš¾',
  'tennis': 'ğŸ¾', 'volleyball': 'ğŸ', 'trophy': 'ğŸ†', 'medal': 'ğŸ…',
  'art': 'ğŸ¨', 'game': 'ğŸ®', 'dice': 'ğŸ²', 'music': 'ğŸµ',
  'guitar': 'ğŸ¸', 'microphone': 'ğŸ¤', 'headphones': 'ğŸ§',
  'book': 'ğŸ“–', 'books': 'ğŸ“š', 'notebook': 'ğŸ““', 'pencil': 'âœï¸',

  // Food
  'pizza': 'ğŸ•', 'burger': 'ğŸ”', 'fries': 'ğŸŸ', 'hotdog': 'ğŸŒ­',
  'taco': 'ğŸŒ®', 'burrito': 'ğŸŒ¯', 'apple': 'ğŸ', 'banana': 'ğŸŒ',
  'watermelon': 'ğŸ‰', 'grapes': 'ğŸ‡', 'strawberry': 'ğŸ“',
  'cake': 'ğŸ°', 'cookie': 'ğŸª', 'chocolate': 'ğŸ«', 'candy': 'ğŸ¬',
  'lollipop': 'ğŸ­', 'coffee': 'â˜•', 'tea': 'ğŸµ',

  // Animals
  'dog': 'ğŸ•', 'cat': 'ğŸˆ', 'mouse': 'ğŸ', 'rabbit': 'ğŸ‡',
  'fox': 'ğŸ¦Š', 'bear': 'ğŸ»', 'panda': 'ğŸ¼', 'koala': 'ğŸ¨',
  'tiger': 'ğŸ¯', 'lion': 'ğŸ¦', 'cow': 'ğŸ®', 'pig': 'ğŸ·',
  'frog': 'ğŸ¸', 'monkey': 'ğŸ’', 'chicken': 'ğŸ”', 'penguin': 'ğŸ§',
  'bird': 'ğŸ¦', 'baby_chick': 'ğŸ¤', 'unicorn': 'ğŸ¦„', 'bee': 'ğŸ',
  'bug': 'ğŸ›', 'butterfly': 'ğŸ¦‹', 'snail': 'ğŸŒ', 'snake': 'ğŸ',
  'turtle': 'ğŸ¢', 'fish': 'ğŸŸ', 'dolphin': 'ğŸ¬', 'whale': 'ğŸ‹',
  'shark': 'ğŸ¦ˆ', 'octopus': 'ğŸ™',

  // Nature
  'sun': 'â˜€ï¸', 'moon': 'ğŸŒ™', 'star2': 'ğŸŒŸ', 'cloud': 'â˜ï¸',
  'rain': 'ğŸŒ§ï¸', 'umbrella': 'â˜‚ï¸', 'snowflake': 'â„ï¸', 'lightning': 'âš¡',
  'tornado': 'ğŸŒªï¸', 'rainbow': 'ğŸŒˆ', 'ocean': 'ğŸŒŠ', 'tree': 'ğŸŒ³',
  'evergreen': 'ğŸŒ²', 'cactus': 'ğŸŒµ', 'herb': 'ğŸŒ¿',
  'four_leaf_clover': 'ğŸ€', 'rose': 'ğŸŒ¹', 'tulip': 'ğŸŒ·',
  'sunflower': 'ğŸŒ»', 'blossom': 'ğŸŒ¼', 'earth': 'ğŸŒ',

  // Travel & Places
  'car': 'ğŸš—', 'taxi': 'ğŸš•', 'bus': 'ğŸšŒ', 'train': 'ğŸš†',
  'airplane': 'âœˆï¸', 'rocket': 'ğŸš€', 'bike': 'ğŸš²', 'scooter': 'ğŸ›´',
  'house': 'ğŸ ', 'school': 'ğŸ«', 'office': 'ğŸ¢', 'hospital': 'ğŸ¥',
  'bank': 'ğŸ¦', 'hotel': 'ğŸ¨', 'castle': 'ğŸ°', 'tent': 'â›º',

  // Objects
  'phone': 'ğŸ“±', 'computer': 'ğŸ’»', 'keyboard': 'âŒ¨ï¸', 'printer': 'ğŸ–¨ï¸',
  'camera': 'ğŸ“·', 'bulb': 'ğŸ’¡', 'battery': 'ğŸ”‹', 'electric_plug': 'ğŸ”Œ',
  'mag': 'ğŸ”', 'lock': 'ğŸ”’', 'unlock': 'ğŸ”“', 'key': 'ğŸ”‘',
  'hammer': 'ğŸ”¨', 'wrench': 'ğŸ”§', 'nut_and_bolt': 'ğŸ”©',
  'gift': 'ğŸ', 'balloon': 'ğŸˆ', 'party_popper': 'ğŸ‰',
  'confetti_ball': 'ğŸŠ', 'flag': 'ğŸš©',
}

// Search for emoji matches
export function searchEmojis(query) {
  if (!query) return []

  const lowerQuery = query.toLowerCase()
  const matches = []

  for (const [name, emoji] of Object.entries(emojiMap)) {
    if (name.toLowerCase().includes(lowerQuery)) {
      matches.push([name, emoji])
    }
  }

  return matches.slice(0, 10) // Return max 10 matches
}

// Check if text ends with emoji trigger pattern
export function getEmojiTrigger(value, cursorPos) {
  const textBeforeCursor = value.substring(0, cursorPos)
  const match = textBeforeCursor.match(/:([a-z_]+)$/i)

  if (match) {
    return {
      query: match[1],
      startPos: cursorPos - match[1].length - 1, // Include the ':'
    }
  }

  return null
}

// Insert emoji at cursor position
export function insertEmoji(value, cursorPos, emojiName) {
  const emoji = emojiMap[emojiName]
  if (!emoji) return null

  // Find the start of the emoji trigger
  const textBeforeCursor = value.substring(0, cursorPos)
  const match = textBeforeCursor.match(/:([a-z_]+)$/i)

  if (!match) return null

  const triggerStart = cursorPos - match[0].length
  const beforeTrigger = value.substring(0, triggerStart)
  const afterCursor = value.substring(cursorPos)

  return {
    newValue: beforeTrigger + emoji + afterCursor,
    newPos: triggerStart + emoji.length,
  }
}
