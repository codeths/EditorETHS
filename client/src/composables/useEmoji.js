// Emoji autocomplete map
export const emojiMap = {
  // Smileys & Emotion
  'smile': '😊', 'grin': '😁', 'joy': '😂', 'rofl': '🤣', 'sob': '😭',
  'heart_eyes': '😍', 'kiss': '😘', 'wink': '😉', 'thinking': '🤔',
  'neutral': '😐', 'smirk': '😏', 'unamused': '😒', 'roll_eyes': '🙄',
  'grimacing': '😬', 'lying': '🤥', 'relieved': '😌', 'pensive': '😔',
  'sleepy': '😪', 'sleeping': '😴', 'mask': '😷', 'sick': '🤒',
  'injured': '🤕', 'nauseated': '🤢', 'vomit': '🤮', 'sneeze': '🤧',
  'hot': '🥵', 'cold': '🥶', 'dizzy': '😵', 'explode': '🤯',
  'cowboy': '🤠', 'party': '🥳', 'sunglasses': '😎', 'nerd': '🤓',
  'monocle': '🧐', 'confused': '😕', 'worried': '😟', 'frown': '☹️',
  'open_mouth': '😮', 'hushed': '😯', 'astonished': '😲', 'flushed': '😳',
  'pleading': '🥺', 'anguished': '😧', 'fearful': '😨', 'cold_sweat': '😰',
  'disappointed': '😞', 'sweat': '😓', 'weary': '😩', 'tired': '😫',
  'yawn': '🥱', 'triumph': '😤', 'rage': '😡', 'angry': '😠',
  'cursing': '🤬', 'smiling_imp': '😈', 'imp': '👿', 'skull': '💀',

  // Hand gestures
  'clap': '👏', 'pray': '🙏', 'thumbsup': '👍', 'thumbsdown': '👎',
  'ok_hand': '👌', 'punch': '👊', 'fist': '✊', 'v': '✌️',
  'wave': '👋', 'point_right': '👉', 'point_left': '👈', 'point_up': '☝️',
  'point_down': '👇', 'raised_hand': '✋', 'muscle': '💪',

  // Hearts
  'heart': '❤️', 'orange_heart': '🧡', 'yellow_heart': '💛',
  'green_heart': '💚', 'blue_heart': '💙', 'purple_heart': '💜',
  'black_heart': '🖤', 'white_heart': '🤍', 'brown_heart': '🤎',
  'broken_heart': '💔', 'two_hearts': '💕', 'sparkling_heart': '💖',
  'heartpulse': '💗', 'heartbeat': '💓', 'revolving_hearts': '💞',

  // Symbols
  'star': '⭐', 'sparkles': '✨', 'boom': '💥', 'fire': '🔥',
  'dizzy_symbol': '💫', 'sweat_drops': '💦', 'dash': '💨',
  'check': '✅', 'x': '❌', 'warning': '⚠️', 'stop_sign': '🛑',
  'bell': '🔔', 'zzz': '💤', 'speech_balloon': '💬',
  'thought_balloon': '💭', 'eye': '👁️', 'brain': '🧠',

  // Activities
  'soccer': '⚽', 'basketball': '🏀', 'football': '🏈', 'baseball': '⚾',
  'tennis': '🎾', 'volleyball': '🏐', 'trophy': '🏆', 'medal': '🏅',
  'art': '🎨', 'game': '🎮', 'dice': '🎲', 'music': '🎵',
  'guitar': '🎸', 'microphone': '🎤', 'headphones': '🎧',
  'book': '📖', 'books': '📚', 'notebook': '📓', 'pencil': '✏️',

  // Food
  'pizza': '🍕', 'burger': '🍔', 'fries': '🍟', 'hotdog': '🌭',
  'taco': '🌮', 'burrito': '🌯', 'apple': '🍎', 'banana': '🍌',
  'watermelon': '🍉', 'grapes': '🍇', 'strawberry': '🍓',
  'cake': '🍰', 'cookie': '🍪', 'chocolate': '🍫', 'candy': '🍬',
  'lollipop': '🍭', 'coffee': '☕', 'tea': '🍵',

  // Animals
  'dog': '🐕', 'cat': '🐈', 'mouse': '🐁', 'rabbit': '🐇',
  'fox': '🦊', 'bear': '🐻', 'panda': '🐼', 'koala': '🐨',
  'tiger': '🐯', 'lion': '🦁', 'cow': '🐮', 'pig': '🐷',
  'frog': '🐸', 'monkey': '🐒', 'chicken': '🐔', 'penguin': '🐧',
  'bird': '🐦', 'baby_chick': '🐤', 'unicorn': '🦄', 'bee': '🐝',
  'bug': '🐛', 'butterfly': '🦋', 'snail': '🐌', 'snake': '🐍',
  'turtle': '🐢', 'fish': '🐟', 'dolphin': '🐬', 'whale': '🐋',
  'shark': '🦈', 'octopus': '🐙',

  // Nature
  'sun': '☀️', 'moon': '🌙', 'star2': '🌟', 'cloud': '☁️',
  'rain': '🌧️', 'umbrella': '☂️', 'snowflake': '❄️', 'lightning': '⚡',
  'tornado': '🌪️', 'rainbow': '🌈', 'ocean': '🌊', 'tree': '🌳',
  'evergreen': '🌲', 'cactus': '🌵', 'herb': '🌿',
  'four_leaf_clover': '🍀', 'rose': '🌹', 'tulip': '🌷',
  'sunflower': '🌻', 'blossom': '🌼', 'earth': '🌎',

  // Travel & Places
  'car': '🚗', 'taxi': '🚕', 'bus': '🚌', 'train': '🚆',
  'airplane': '✈️', 'rocket': '🚀', 'bike': '🚲', 'scooter': '🛴',
  'house': '🏠', 'school': '🏫', 'office': '🏢', 'hospital': '🏥',
  'bank': '🏦', 'hotel': '🏨', 'castle': '🏰', 'tent': '⛺',

  // Objects
  'phone': '📱', 'computer': '💻', 'keyboard': '⌨️', 'printer': '🖨️',
  'camera': '📷', 'bulb': '💡', 'battery': '🔋', 'electric_plug': '🔌',
  'mag': '🔍', 'lock': '🔒', 'unlock': '🔓', 'key': '🔑',
  'hammer': '🔨', 'wrench': '🔧', 'nut_and_bolt': '🔩',
  'gift': '🎁', 'balloon': '🎈', 'party_popper': '🎉',
  'confetti_ball': '🎊', 'flag': '🚩',
}

// Search for emoji matches
export function searchEmojis(query) {
  if (!query) return []

  const lowerQuery = query.toLowerCase()
  const matches = []

  for (const [name, emoji] of Object.entries(emojiMap)) {
    if (name.toLowerCase().includes(lowerQuery)) {
      matches.push([name, emoji])
    }
  }

  return matches.slice(0, 10) // Return max 10 matches
}

// Check if text ends with emoji trigger pattern
export function getEmojiTrigger(value, cursorPos) {
  const textBeforeCursor = value.substring(0, cursorPos)
  const match = textBeforeCursor.match(/:([a-z_]+)$/i)

  if (match) {
    return {
      query: match[1],
      startPos: cursorPos - match[1].length - 1, // Include the ':'
    }
  }

  return null
}

// Insert emoji at cursor position
export function insertEmoji(value, cursorPos, emojiName) {
  const emoji = emojiMap[emojiName]
  if (!emoji) return null

  // Find the start of the emoji trigger
  const textBeforeCursor = value.substring(0, cursorPos)
  const match = textBeforeCursor.match(/:([a-z_]+)$/i)

  if (!match) return null

  const triggerStart = cursorPos - match[0].length
  const beforeTrigger = value.substring(0, triggerStart)
  const afterCursor = value.substring(cursorPos)

  return {
    newValue: beforeTrigger + emoji + afterCursor,
    newPos: triggerStart + emoji.length,
  }
}
